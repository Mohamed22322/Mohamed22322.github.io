<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css ">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal :wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Ù†ÙØ³ Ø§Ù„Ø§Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø°ÙŠ ÙƒØ§Ù† Ø¹Ù†Ø¯Ùƒ */
    body {
      font-family: 'Tajawal', sans-serif;
      margin: 30px;
      background-color: #f4f4f4;
      color: #333;
    }

    h1 {
      text-align: center;
      color: #c0392b;
    }

    .form-container {
      max-width: 700px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }

    input[type="text"],
    input[type="password"],
    select,
    textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0 20px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      background-color: #e74c3c;
      color: white;
      border: none;
      padding: 12px 16px;
      cursor: pointer;
      font-size: 16px;
      border-radius: 6px;
      transition: background-color 0.3s ease;
      width: 100%;
      margin-bottom: 15px;
    }

    button:hover {
      background-color: #c0392b;
    }

    ul {
      list-style-type: none;
      padding: 0;
    }

    li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #ecf0f1;
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 8px;
    }

    .controls {
      display: flex;
      gap: 10px;
    }

    .edit-btn {
      background-color: #f39c12;
    }

    .edit-btn:hover {
      background-color: #e67e22;
    }

    .delete-btn {
      background-color: #e74c3c;
    }

    .delete-btn:hover {
      background-color: #c0392b;
    }

    .alert {
      text-align: center;
      padding: 10px;
      margin: 20px 0;
      border-radius: 6px;
      display: none;
    }

    .success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .danger {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
  </style>
</head>
<body>

<div class="form-container">
  <h1><i class="fas fa-cog"></i> Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©</h1>

  <!-- ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØªØ­Ø±Ùƒ -->
  <label for="movingText">âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØªØ­Ø±Ùƒ:</label>
  <input type="text" id="movingText" placeholder="Ø§Ø¯Ø®Ù„ Ø§Ù„Ù†Øµ Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ø«Ø§Ù„: Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø±Ø­ÙŠÙ…)">
  <button onclick="updateMovingText()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØªØ­Ø±Ùƒ</button>

  <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù… -->
  <label for="sectionSelect">ğŸ“ Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…:</label>
  <select id="sectionSelect">
    <option value="morning">ğŸŒ… Ø¯Ø¹Ø§Ø¡ Ø§Ù„ØµØ¨Ø§Ø­</option>
    <option value="evening">ğŸŒ™ Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¡</option>
    <option value="friday">ğŸ•Œ Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø¬Ù…Ø¹Ø©</option>
    <option value="azkar">ğŸ“– Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ ÙˆØ§Ù„Ù…Ø³Ø§Ø¡</option>
  </select>

  <!-- ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
  <label for="adminPassword">ğŸ”’ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
  <input type="password" id="adminPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">

  <!-- Ø¥Ø¶Ø§ÙØ© Ø¯Ø¹Ø§Ø¡ Ø¬Ø¯ÙŠØ¯ -->
  <label for="newDuaInput">â• Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø£Ùˆ Ø§Ù„Ø°ÙƒØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯:</label>
  <textarea id="newDuaInput" rows="3" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù‡Ù†Ø§..."></textarea>

  <button onclick="addCustomDua()">â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø¹Ø§Ø¡</button>

  <!-- Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯Ø¹ÙŠØ© -->
  <h2 style="margin-top: 30px;"><i class="fas fa-list-ul"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©</h2>
  <ul id="duaList"></ul>

  <!-- ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© -->
  <label for="bgColor">ğŸ¨ ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø©:</label>
  <input type="color" id="bgColor" value="#ffffff">
  <button onclick="changeBackgroundColor()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù„ÙˆÙ†</button>

  <!-- ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
  <label for="btnColor">ğŸ–Œï¸ ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±:</label>
  <input type="color" id="btnColor" value="#e74c3c">
  <button onclick="changeButtonColor()">ğŸ’¾ Ø­ÙØ¸ Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±</button>

  <!-- ØªØºÙŠÙŠØ± Ø´ÙƒÙ„ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
  <label for="navbarRadius">ğŸ“ Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ:</label>
  <select id="navbarRadius">
    <option value="5px">Ø­Ø§Ø¯</option>
    <option value="10px">Ù…Ø³ØªØ¯ÙŠØ± Ù‚Ù„ÙŠÙ„Ù‹Ø§</option>
    <option value="20px">Ù…Ø³ØªØ¯ÙŠØ± Ø£ÙƒØ«Ø±</option>
    <option value="50%">Ø¯Ø§Ø¦Ø±ÙŠ ØªÙ…Ø§Ù…Ù‹Ø§</option>
  </select>
  <button onclick="changeNavbarStyle()">ğŸ’¾ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø±ÙŠØ·</button>

  <!-- Ø±Ø³Ø§Ù„Ø© Ø­Ø§Ù„Ø© -->
  <div id="messageBox" class="alert success" style="display: none;"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js "></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js "></script>

<script>
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "your-project-id.firebaseapp.com",
    databaseURL: "https://your-project-id.firebaseio.com ",
    projectId: "your-project-id",
    storageBucket: "your-project-id.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  firebase.initializeApp(firebaseConfig);

  let currentDuas = {};

  window.onload = function () {
    firebase.database().ref('duas').on('value', (snapshot) => {
      currentDuas = snapshot.val() || {};
      document.getElementById('sectionSelect').onchange = renderDuaList;
      renderDuaList();
    });
  };

  function renderDuaList() {
    const section = document.getElementById('sectionSelect').value;
    const list = document.getElementById('duaList');
    list.innerHTML = '';

    if (!currentDuas[section]) currentDuas[section] = [];

    currentDuas[section].forEach((text, index) => {
      const li = document.createElement('li');
      li.innerHTML = `
        <span contenteditable="true" onblur="updateDua(${index}, this.innerText)" onfocus="this.dataset.oldText = this.innerText;">
          ${text}
        </span>
        <div class="controls">
          <button class="edit-btn" onclick="saveAllDuas()">ğŸ’¾ Ø­ÙØ¸</button>
          <button class="delete-btn" onclick="deleteDua(${index})">âŒ Ø­Ø°Ù</button>
        </div>
      `;
      list.appendChild(li);
    });
  }

  function addCustomDua() {
    const enteredPass = document.getElementById('adminPassword').value.trim();
    const newDua = document.getElementById('newDuaInput').value.trim();

    if (enteredPass !== "sudan10##") {
      showMessage("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©", "danger");
      return;
    }

    if (!newDua) {
      showMessage("âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø¯Ø¹Ø§Ø¡", "danger");
      return;
    }

    const section = document.getElementById('sectionSelect').value;
    if (!currentDuas[section]) currentDuas[section] = [];
    currentDuas[section].push(newDua);

    showMessage("âœ… ØªÙ… Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¬Ø§Ø­", "success");
    saveAllDuas();
    renderDuaList();
  }

  function updateDua(index, newText) {
    const section = document.getElementById('sectionSelect').value;
    currentDuas[section][index] = newText;
    showMessage("âœï¸ ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¤Ù‚ØªÙ‹Ø§", "success");
  }

  function deleteDua(index) {
    const section = document.getElementById('sectionSelect').value;
    if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø¹Ø§Ø¡ØŸ")) {
      currentDuas[section].splice(index, 1);
      saveAllDuas();
      showMessage("âœ… ØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ù†Ø¬Ø§Ø­", "success");
      renderDuaList();
    }
  }

  function saveAllDuas() {
    firebase.database().ref('duas').set(currentDuas);
    showMessage("âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø­Ø§Ø¨Ø©", "success");
  }

  function updateMovingText() {
    const newText = document.getElementById('movingText').value.trim();
    if (!newText) {
      alert("âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ±Ùƒ Ø§Ù„Ù†Øµ ÙØ§Ø±ØºÙ‹Ø§");
      return;
    }
    firebase.database().ref('settings/movingText').set(newText);
    showMessage("âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØªØ­Ø±Ùƒ", "success");
  }

  function changeBackgroundColor() {
    const bgColor = document.getElementById('bgColor').value;
    firebase.database().ref('settings/bgColor').set(bgColor);
    showMessage("âœ… ØªÙ… ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©", "success");
  }

  function changeButtonColor() {
    const btnColor = document.getElementById('btnColor').value;
    firebase.database().ref('settings/btnColor').set(btnColor);
    showMessage("âœ… ØªÙ… ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø±", "success");
  }

  function changeNavbarStyle() {
    const radius = document.getElementById('navbarRadius').value;
    firebase.database().ref('settings/navbarRadius').set(radius);
    showMessage("âœ… ØªÙ… ØªØºÙŠÙŠØ± Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ", "success");
  }

  function showMessage(text, type) {
    const msgBox = document.getElementById('messageBox');
    msgBox.className = `alert ${type}`;
    msgBox.style.display = 'block';
    msgBox.textContent = text;
    setTimeout(() => {
      msgBox.style.display = 'none';
    }, 3000);
  }
</script>

</body>
</html>
